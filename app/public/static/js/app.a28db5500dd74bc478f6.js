webpackJsonp([1],[,,,,,,,,,,function(t,e,a){"use strict";var n=a(3),i=a(43),s=a(39),c=a.n(s),o=a(38),l=a.n(o);n.a.use(i.a),e.a=new i.a({mode:"history",routes:[{path:"/",name:"List",component:c.a},{path:"/detail",name:"Detail",component:l.a}]})},function(t,e,a){function n(t){a(35)}var i=a(2)(a(29),a(42),n,null,null);t.exports=i.exports},,,,,,,,,,,,,,,,,,function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"app"}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(4),i=a.n(n);e.default={name:"detail",props:{during:{type:Number,default:1e3},limitForName:{type:Number,default:10},limitForComment:{type:Number,default:144}},data:function(){return{article:"",chats:[],uname:"",comment:""}},mounted:function(){this.getArticleInfo()},methods:{getArticleInfo:function(){var t=this;i.a.get("http://m.xihu.fm/api/xihu/stories/"+t.$route.query.id).then(function(e){console.log(e),t.article=e.data,document.querySelector(".chat-list").innerHTML="",t.setChatData()})},setChatData:function(){var t=this,e=t.article.chats;if(!e.length)return void(t.autoplay&&clearInterval(t.autoplay));var a=e.shift();t.chatId=a.id,t.chats.push(a)},play:function(){this.setChatData()},autoPlay:function(){var t=this,e=setInterval(function(){t.play()},t.during);t.autoplay=e},dialog:function(t){var e=1===t?"block":"none";document.querySelector("#chat-dialog").style.display=e},publish:function(){var t=this;if(t.uname&&t.comment){var e="http://m.xihu.fm/api/xihu/stories/{chat}/bullet";e=e.replace(/{chat}/g,t.chatId),i.a.post(e,{name:t.uname,content:t.comment}).then(function(e){0===e.data.code&&t.setBullet()})}},setBullet:function(){var t=this,e={};e.cname=t.uname,e.memo=t.comment;var a=t.chats;a.forEach(function(a){a.id===t.chatId&&a.bullets.push(e)}),t.chats=a,t.resetForm()},resetForm:function(){var t=this;t.uname="",t.comment="",t.dialog(2)}}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(4),i=a.n(n);e.default={name:"list",data:function(){return{articles:[]}},mounted:function(){this.getArticles()},methods:{getArticles:function(){var t=this;i.a.get("http://m.xihu.fm/api/xihu/stories").then(function(e){t.articles=e.data.articles}).catch(function(t){console.log(t)})},route:function(t){this.$router.push({name:"Detail",query:{id:t}})}}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(3),i=a(11),s=a.n(i),c=a(10);n.a.config.productionTip=!1,new n.a({el:"#app",router:c.a,template:"<App/>",components:{App:s.a}})},function(t,e){},function(t,e){},function(t,e){},,,function(t,e,a){function n(t){a(33)}var i=a(2)(a(30),a(40),n,null,null);t.exports=i.exports},function(t,e,a){function n(t){a(34)}var i=a(2)(a(31),a(41),n,"data-v-a5b2694c",null);t.exports=i.exports},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"chat-detail"},[a("div",{staticClass:"chat-info"},[a("h2",{staticClass:"chat-title"},[t._v(t._s(t.article.title))]),t._v(" "),a("p",{staticClass:"chat-desc"},[t._v(t._s(t.article.desc))]),t._v(" "),a("p",{staticClass:"chat-author"},[t._v(t._s(t.article.author))])]),t._v(" "),a("div",{staticClass:"chat-list"},t._l(t.chats,function(e){return a("div",{key:e.id,staticClass:"chat-list-item",attrs:{id:e.id}},[a("div",{staticClass:"chat-list-row",class:e.type},["left"==e.type?a("div",{staticClass:"chat-avatar"},[a("span",[t._v(t._s(e.name.substr(0,1)))]),t._v(" "),a("p",[t._v(t._s(e.name))])]):t._e(),t._v(" "),a("p",{staticClass:"chat-list-content"},[t._v(t._s(e.content))]),t._v(" "),"right"==e.type?a("div",{staticClass:"chat-avatar"},[a("span",[t._v(t._s(e.name.substr(0,1)))]),t._v(" "),a("p",[t._v(t._s(e.name))])]):t._e()]),t._v(" "),e.bullets.length>0?a("div",{staticClass:"chat-item-reply",class:e.type},t._l(e.bullets,function(e,n){return a("p",{key:n},[t._v(t._s(e.name)+"："+t._s(e.comment))])})):t._e()])})),t._v(" "),a("div",{staticClass:"chat-footer"},[a("button",{on:{click:function(e){t.dialog(1)}}},[t._v("评 论")]),t._v(" "),a("button",{on:{click:t.play}},[t._v("继 续")]),t._v(" "),a("button",{on:{click:t.autoPlay}},[t._v("自动围观")])]),t._v(" "),a("div",{staticClass:"chat-dialog",attrs:{id:"chat-dialog"}},[a("div",{staticClass:"chat-comment-form"},[a("h3",[t._v("评论")]),t._v(" "),a("div",{staticClass:"chat-cf-item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.uname,expression:"uname"}],attrs:{type:"text",placeholder:"昵称",maxlength:t.limitForName},domProps:{value:t.uname},on:{input:function(e){e.target.composing||(t.uname=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"chat-cf-item"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],staticClass:"chat-textarea",attrs:{placeholder:"说点什么",maxlength:t.limitForComment},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"chat-cf-item"},[a("button",{staticClass:"chat-publish",on:{click:t.publish}},[t._v("发表")])])]),t._v(" "),a("a",{staticClass:"chat-close",attrs:{href:"javascript:;"},on:{click:function(e){t.dialog(2)}}},[t._v("X")])])])},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"chat-list"},t._l(t.articles,function(e){return a("li",{key:e.articleId,on:{click:function(a){t.route(e.articleId)}}},[a("h3",{staticClass:"chat-title"},[t._v(t._s(e.title))]),t._v(" "),a("p",{staticClass:"chat-desc"},[t._v(t._s(e.desc))]),t._v(" "),a("p",{staticClass:"chat-author"},[t._v(t._s(e.author))])])}))},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},staticRenderFns:[]}}],[32]);
//# sourceMappingURL=app.a28db5500dd74bc478f6.js.map